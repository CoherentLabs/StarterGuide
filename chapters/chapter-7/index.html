<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.97177929d6609804395388d97b1c33d05ff123faacdb470ba6df96eba63466c3912512d5e7996ae1a74d34b04f660f5be64f6713688d123759c5493834e721a7.css integrity="sha512-lxd5KdZgmAQ5U4jZexwz0F/xI/qs20cLpt+W66Y0ZsORJRLV55lq4adNNLBPZg9b5k9nE2iNEjdZxUk4NOchpw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Chapter 7: Adding more menus - Gameface Starter Guider</title><meta name=description content><link rel=canonical href=/chapters/chapter-7/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Chapter 7: Adding more menus"><meta property="og:description" content="Now that we have our Settings Menu, we can start adding other menus like an Inventory and a Map. Since in a real game all of these menus won’t be on the same page, we need to add their content to be dynamically loaded in the Pause Menu. Luckily for us, we can use what we already have learned about data-binding to do that.
The first thing we need to do is to add a new value to our model."><meta property="og:url" content="/chapters/chapter-7/"><meta property="og:site_name" content="Gameface Starter Guider"><meta property="article:published_time" content="2021-09-15T08:39:17+03:00"><meta property="article:modified_time" content="2021-09-15T08:39:17+03:00"><meta property="og:image" content="doks.png"><meta property="og:image:alt" content="Gameface Starter Guider"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@getdoks"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="Chapter 7: Adding more menus"><meta name=twitter:description content><meta name=twitter:image content="doks.png"><meta name=twitter:image:alt content="Chapter 7: Adding more menus"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"/#/schema/organization/1","name":"Doks","url":"/","sameAs":["https://twitter.com/getdoks","https://github.com/h-enk/doks"],"logo":{"@type":"ImageObject","@id":"/#/schema/image/1","url":"/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"/#/schema/image/1"}},{"@type":"WebSite","@id":"/#/schema/website/1","url":"/","name":"Gameface Starter Guider","description":"","publisher":{"@id":"/#/schema/organization/1"}},{"@type":"WebPage","@id":"/chapters/chapter-7/","url":"/chapters/chapter-7/","name":"Chapter 7: Adding more menus","description":"","isPartOf":{"@id":"/#/schema/website/1"},"about":{"@id":"/#/schema/organization/1"},"datePublished":"2021-09-15T08:39:17CET","dateModified":"2021-09-15T08:39:17CET","breadcrumb":{"@id":"/chapters/chapter-7/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"/chapters/chapter-7/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["/chapters/chapter-7/"]}]},{"@type":"BreadcrumbList","@id":"/chapters/chapter-7/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"","url":"","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"/chapters/","url":"/chapters/","name":"Chapters"}},{"@type":"ListItem","position":4,"item":{"@id":"/chapters/chapter-7/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"/chapters/chapter-7/#/schema/image/2","url":"doks.png","contentUrl":"doks.png","caption":"Chapter 7: Adding more menus"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=site.webmanifest></head><body class="chapters single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Bootstrap>Gameface Starter Guider</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Gameface Starter Guider</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"></ul></div></div></nav></header><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-chapters aria-expanded=true>
Chapters</button><div class="collapse show" id=section-chapters><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/chapters/chapter-1/>Chapter 1: Getting Started</a></li><li><a class="docs-link rounded" href=/chapters/chapter-2/>Chapter 2: Creating our first UI component</a></li><li><a class="docs-link rounded" href=/chapters/chapter-3/>Chapter 3: Health Bar</a></li><li><a class="docs-link rounded" href=/chapters/chapter-4/>Chapter 4: Minimap</a></li><li><a class="docs-link rounded" href=/chapters/chapter-5/>Chapter 5: Pause Menu</a></li><li><a class="docs-link rounded" href=/chapters/chapter-6/>Chapter 6: Settings Menu</a></li><li><a class="docs-link rounded active" href=/chapters/chapter-7/>Chapter 7: Adding more menus</a></li><li><a class="docs-link rounded" href=/chapters/chapter-8/>Chapter 8: Inventory</a></li><li><a class="docs-link rounded" href=/chapters/chapter-9/>Chapter 9: Map</a></li><li><a class="docs-link rounded" href=/chapters/chapter-10/>Chapter 10: Debugging, Profiling and Optimizations</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#get-the-chapter-files>Get the chapter files</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/chapters/>Chapters</a></li><li class="breadcrumb-item active" aria-current=page>Chapter 7: Adding more menus</li></ol></nav><h1>Chapter 7: Adding more menus</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#get-the-chapter-files>Get the chapter files</a></li></ul></nav></div></nav><p>Now that we have our Settings Menu, we can start adding other menus like an Inventory and a Map. Since in a real game all of these menus won’t be on the same page, we need to add their content to be dynamically loaded in the Pause Menu. Luckily for us, we can use what we already have learned about data-binding to do that.</p><p>The first thing we need to do is to add a new value to our model. This would be activePauseMenu, which will control which screen in the Pause Menu is shown.</p><pre><code>    activePauseMenu: 'settings'
</code></pre><p>We can now add a new container in the <code>.pause-menu</code> called <code>.tabs</code> - inside, we’ll add a tab with the Settings text:</p><pre><code>&lt;div class=&quot;tabs&quot;&gt;
    &lt;div class=&quot;tab&quot;&gt;Settings&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>With this we can bind the Settings Menu to the model using <code>data-bind-if</code>:</p><pre><code>&lt;div class=&quot;settings-menu&quot; data-bind-if=&quot;{{PlayerModel.activePauseMenu}} === 'settings'&quot;&gt;
</code></pre><p>That way when we set the model to another menu, it will hide the settings and show the other. To trigger the change, we can add the following code to our script.js file:</p><pre><code>function changeScreen(event) {
    if (event.target.classList.contains(&quot;tab&quot;)) {
        engine.trigger(&quot;change_menu&quot;, event.target.textContent.toLowerCase());
    }
}
</code></pre><p>This will allow us to send an event to the engine to change the <code>activePauseMenu</code>. One thing to note in this code is that this function will be attached to the <code>.tabs</code> container and to each individual tab - this allows us to benefit from the event propagation and have only one event attached (regardless of how many tabs there are). Inside this function we then need to check if the click target is a tab before we can trigger the <code>‘change_menu’</code> event and pass the text of the target tab.</p><p>Just like in <a href=/chapters/chapter-5/#listening-and-triggering-events>Chapter 5</a> we don’t have a backend, so we need to listen to the <code>‘change_menu’</code> event in our frontend. As such, we’ll just write the following code in the <code>script.js</code> file:</p><pre><code>engine.on('change_menu', (menu) =&gt; {
    PlayerModel.activePauseMenu = menu;
    engine.updateWholeModel(PlayerModel);
    engine.synchronizeModels();
})
</code></pre><p>Now we can set the <code>activePauseMenu</code> property of our model to be the string we passed in our <code>engine.trigger</code> function. In addition, we need to attach this event to our <code>.tabs</code> element. Since the tabs element is enclosed in a <code>data-bind-if</code>, if we make any reference to the <code>.tabs</code> element, each time we change the model the reference will be removed. This is why we’ll attach the event directly to our element with <code>onmousedown</code>:</p><pre><code>&lt;div class=&quot;tabs&quot; onmousedown=&quot;changeScreen(event)&quot;&gt;
</code></pre><p>If we now open our Player, we can see that clicking on the Settings tab will have no effect, meaning that everything is working properly. To verify that, we’ll add another tab called ‘Inventory’ which we’ll later use in the next chapter.</p><pre><code>&lt;div class=&quot;tab&quot;&gt;Inventory&lt;/div&gt;
</code></pre><p>And now if we open the Player and click on the Inventory tab, the settings menu should disappear; if we click back on the Settings tab, it should reappear. Now we’ll notice an issue: if we move the sliders, the values don’t get updated. The reason for that is identical to the one above (where we had to add the event listener to the element) - the data-bind-if changes the references.</p><p>Hence, we’ll copy over the code we wrote in the previous chapter and wrap it in an if statement, so that the event listeners only get attached when the settings menu is opened.</p><pre><code>engine.on(&quot;change_menu&quot;, (menu) =&gt; {
    PlayerModel.activePauseMenu = menu;
    engine.updateWholeModel(PlayerModel);
    engine.synchronizeModels();
 
    if (menu === &quot;settings&quot;) {
        const sliderVolume = document.querySelector(&quot;.slider-volume&quot;);
        const volumeValue = document.querySelector(&quot;.volume-value&quot;);
 
        sliderVolume.addEventListener(&quot;sliderupdate&quot;, (e) =&gt; {
            volumeValue.textContent = e.detail;
        });
 
        const sliderDifficulty = document.querySelector(&quot;.slider-difficulty&quot;);
        const difficultyValue = document.querySelector(&quot;.difficulty-value&quot;);
 
        sliderDifficulty.addEventListener(&quot;sliderupdate&quot;, (e) =&gt; {
            difficultyValue.textContent = e.detail;
        });
    }
});
</code></pre><p>And inside the engine.on(&ldquo;pause_toggle&rdquo;) callback we can do the following:</p><pre><code>engine.on(&quot;pause_toggle&quot;, () =&gt; {
    PlayerModel.isPaused = !PlayerModel.isPaused;
    engine.updateWholeModel(PlayerModel);
    engine.synchronizeModels();
 
    if (PlayerModel.activePauseMenu === &quot;settings&quot;) {
        const sliderVolume = document.querySelector(&quot;.slider-volume&quot;);
        const volumeValue = document.querySelector(&quot;.volume-value&quot;);
 
        sliderVolume.addEventListener(&quot;sliderupdate&quot;, (e) =&gt; {
            volumeValue.textContent = e.detail;
        });
 
        const sliderDifficulty = document.querySelector(&quot;.slider-difficulty&quot;);
        const difficultyValue = document.querySelector(&quot;.difficulty-value&quot;);
 
        sliderDifficulty.addEventListener(&quot;sliderupdate&quot;, (e) =&gt; {
            difficultyValue.textContent = e.detail;
        });
    }
});
</code></pre><p>That leaves us with the same code in two places which is suboptimal. To account for this, we’ll create a function called <code>attachSliderListeners</code> and use it in both places:</p><pre><code>function attachSliderListeners() {
    const sliderVolume = document.querySelector(&quot;.slider-volume&quot;);
    const volumeValue = document.querySelector(&quot;.volume-value&quot;);
 
    sliderVolume.addEventListener(&quot;sliderupdate&quot;, (e) =&gt; {
        volumeValue.textContent = e.detail;
    });
 
    const sliderDifficulty = document.querySelector(&quot;.slider-difficulty&quot;);
    const difficultyValue = document.querySelector(&quot;.difficulty-value&quot;);
 
    sliderDifficulty.addEventListener(&quot;sliderupdate&quot;, (e) =&gt; {
        difficultyValue.textContent = e.detail;
    });
}
</code></pre><p>And then:</p><pre><code>engine.on(&quot;pause_toggle&quot;, () =&gt; {
    PlayerModel.isPaused = !PlayerModel.isPaused;
    engine.updateWholeModel(PlayerModel);
    engine.synchronizeModels();
 
    if (PlayerModel.activePauseMenu === &quot;settings&quot;) {
        attachSliderListeners();
    }
});
 
engine.on(&quot;change_menu&quot;, (menu) =&gt; {
    PlayerModel.activePauseMenu = menu;
    engine.updateWholeModel(PlayerModel);
    engine.synchronizeModels();
 
    if (menu === &quot;settings&quot; &amp;&amp; PlayerModel.isPaused) {
        attachSliderListeners();
    }
});
</code></pre><p>We can now see the values change when we move the sliders in the Player:</p><figure class=border-0><img class="img-fluid lazyload blur-up" data-sizes=auto src=/chapters/chapter-7/chapter-7_1.png width=1279 height=726 alt=chapter-7_1><noscript><img class=img-fluid sizes=100vw src=/chapters/chapter-7/chapter-7_1.png width=1279 height=726 alt=chapter-7_1></noscript><figcaption class=figure-caption><em>The Inventory Tab is shown</em></figcaption></figure><p>Before we end this chapter, we will go through one last thing to improve the look of our Pause Menu - set an active state to our tabs. That way, when a tab is pressed, it will set its state to be active and it will change its appearance.</p><p>In <a href=/chapters/chapter-3/#changing-health-bar-color-based-on-data>Chapter 3</a>, we have already familiarized you with the approach we’ll take here with <code>data-bind-class-toggle</code>. To use it in our tabs, we’ll do the following:</p><pre><code>&lt;div class=&quot;tab&quot; data-bind-class-toggle=&quot;active-tab:{{PlayerModel.activePauseMenu}} === 'settings'&quot;&gt;Settings&lt;/div&gt;
&lt;div class=&quot;tab&quot; data-bind-class-toggle=&quot;active-tab:{{PlayerModel.activePauseMenu}} === 'inventory'&quot;&gt;Inventory&lt;/div&gt;
</code></pre><p>When you select the different tabs in the Player, you will see the active one show:<figure class=border-0><img class="img-fluid lazyload blur-up" data-sizes=auto src=/chapters/chapter-7/chapter-7_2.png width=1280 height=751 alt=chapter-7_2><noscript><img class=img-fluid sizes=100vw src=/chapters/chapter-7/chapter-7_2.png width=1280 height=751 alt=chapter-7_2></noscript><figcaption class=figure-caption><em>We now have an indicator of the active tab</em></figcaption></figure></p><p>In the next chapter we’ll create our first full UI screen using everything we have learned up to this point plus more.</p><h2 id=get-the-chapter-files>Get the chapter files<a href=#get-the-chapter-files class=anchor aria-hidden=true>#</a></h2><p>You can download the completed chapter from <a href=https://github.com/CoherentLabs/StarterGuide/raw/master/files/chapter_7/chapter_7.zip>here</a></p><div class=my-n3></div><div class="row mt-5"><div class=col-8><a class="btn btn-dark px-4 mb-4 mt-4" href=/chapters/chapter-6/ role=button>Previous Chapter</a></div><div class="col-8 d-flex justify-content-end"><a class="btn btn-dark px-4 mb-4 mt-4" href=/chapters/chapter-8/ role=button>Next Chapter</a></div></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.73ca27033146a505b6a0f66b79d99f613a18e778bc9606fd223476d0ebf0fc10508b0d4f5c448b0a946fa1d71fbeffaae9732adc0c2890e61c449217fd6ee1c0.js integrity="sha512-c8onAzFGpQW2oPZredmfYToY53i8lgb9IjR20Ovw/BBQiw1PXESLCpRvodcfvv+q6XMq3AwokOYcRJIX/W7hwA==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.e13cfba4c5524e30386cb9ea71f0f191f39d15b25b222f4b67549689f7c076158f42a2282446044f5cdacc76a6d003efbfa252a84aea0116703803b6339ae35f.js integrity="sha512-4Tz7pMVSTjA4bLnqcfDxkfOdFbJbIi9LZ1SWiffAdhWPQqIoJEYET1zazHam0APvv6JSqErqARZwOAO2M5rjXw==" crossorigin=anonymous defer></script>
<script src=/main.min.dabf7f45921a731f1f8e566e38aed10bb67fb15f4056a8d7e7b56548bb63e1242016c0d83ab86eefab01a24933f8aa4f6e183ba127726dcb59f051ed0ec9f345.js integrity="sha512-2r9/RZIacx8fjlZuOK7RC7Z/sV9AVqjX57VlSLtj4SQgFsDYOrhu76sBokkz+KpPbhg7oSdybctZ8FHtDsnzRQ==" crossorigin=anonymous defer></script></body></html>