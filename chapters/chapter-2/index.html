<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://coherentlabs.github.io/StarterGuide/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://coherentlabs.github.io/StarterGuide/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/StarterGuide/main.97177929d6609804395388d97b1c33d05ff123faacdb470ba6df96eba63466c3912512d5e7996ae1a74d34b04f660f5be64f6713688d123759c5493834e721a7.css integrity="sha512-lxd5KdZgmAQ5U4jZexwz0F/xI/qs20cLpt+W66Y0ZsORJRLV55lq4adNNLBPZg9b5k9nE2iNEjdZxUk4NOchpw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Chapter 2: Creating our first UI component -</title><meta name=description content><link rel=canonical href=https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Chapter 2: Creating our first UI component"><meta property="og:description" content="Now that we have our project set up and are aware of the different approaches available, we can create our first UI component.
This will be a simple component that will demonstrate one of the most important features of Gameface - its dynamic data-binding. The component will be a Clock, placed in the bottom right corner of our HUD.
Mocking our data Before we begin writing our HTML and JavaScript, we need to figure out how we are going to provide the data for our components."><meta property="og:url" content="https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/"><meta property="article:published_time" content="2021-09-15T08:38:57+03:00"><meta property="article:modified_time" content="2021-09-15T08:38:57+03:00"><meta property="og:image" content="https://coherentlabs.github.io/StarterGuide/doks.png"><meta property="og:image:alt" content><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@getdoks"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="Chapter 2: Creating our first UI component"><meta name=twitter:description content><meta name=twitter:image content="https://coherentlabs.github.io/StarterGuide/doks.png"><meta name=twitter:image:alt content="Chapter 2: Creating our first UI component"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://coherentlabs.github.io/#/schema/organization/1","name":"Doks","url":"https://coherentlabs.github.io/","sameAs":["https://twitter.com/getdoks","https://github.com/h-enk/doks"],"logo":{"@type":"ImageObject","@id":"https://coherentlabs.github.io/#/schema/image/1","url":"https://coherentlabs.github.io/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://coherentlabs.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://coherentlabs.github.io/#/schema/website/1","url":"https://coherentlabs.github.io/","name":"","description":"","publisher":{"@id":"https://coherentlabs.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/","url":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/","name":"Chapter 2: Creating our first UI component","description":"","isPartOf":{"@id":"https://coherentlabs.github.io/#/schema/website/1"},"about":{"@id":"https://coherentlabs.github.io/#/schema/organization/1"},"datePublished":"2021-09-15T08:38:57CET","dateModified":"2021-09-15T08:38:57CET","breadcrumb":{"@id":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/"]}]},{"@type":"BreadcrumbList","@id":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://coherentlabs.github.io/StarterGuide","url":"https://coherentlabs.github.io/StarterGuide","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://coherentlabs.github.io/StarterGuide/chapters/","url":"https://coherentlabs.github.io/StarterGuide/chapters/","name":"Chapters"}},{"@type":"ListItem","position":4,"item":{"@id":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://coherentlabs.github.io/StarterGuide/chapters/chapter-2/#/schema/image/2","url":"https://coherentlabs.github.io/StarterGuide/doks.png","contentUrl":"https://coherentlabs.github.io/StarterGuide/doks.png","caption":"Chapter 2: Creating our first UI component"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://coherentlabs.github.io/StarterGuide/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://coherentlabs.github.io/StarterGuide/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://coherentlabs.github.io/StarterGuide/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://coherentlabs.github.io/StarterGuide/site.webmanifest></head><body class="chapters single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/StarterGuide/ aria-label=Bootstrap></a><button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/StarterGuide/></a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"></ul></div></div></nav></header><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-chapters aria-expanded=true>
Chapters</button><div class="collapse show" id=section-chapters><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-1/>Chapter 1: Getting Started</a></li><li><a class="docs-link rounded active" href=/StarterGuide/chapters/chapter-2/>Chapter 2: Creating our first UI component</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-3/>Chapter 3: Health Bar</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-4/>Chapter 4: Minimap</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-5/>Chapter 5: Pause Menu</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-6/>Chapter 6: Settings Menu</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-7/>Chapter 7: Adding more menus</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-8/>Chapter 8: Inventory</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-9/>Chapter 9: Map</a></li><li><a class="docs-link rounded" href=/StarterGuide/chapters/chapter-10/>Chapter 10: Debugging, Profiling and Optimizations</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#mocking-our-data>Mocking our data</a></li><li><a href=#creating-our-component>Creating our component</a><ul><li><a href=#binding-our-mocked-data>Binding our mocked data</a></li><li><a href=#updating-our-clock-to-the-system-time>Updating our clock to the system time</a></li></ul></li><li><a href=#get-the-chapter-files>Get the chapter files</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/StarterGuide/>Home</a></li><li class=breadcrumb-item><a href=/StarterGuide/chapters/>Chapters</a></li><li class="breadcrumb-item active" aria-current=page>Chapter 2: Creating our first UI component</li></ol></nav><h1>Chapter 2: Creating our first UI component</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#mocking-our-data>Mocking our data</a></li><li><a href=#creating-our-component>Creating our component</a><ul><li><a href=#binding-our-mocked-data>Binding our mocked data</a></li><li><a href=#updating-our-clock-to-the-system-time>Updating our clock to the system time</a></li></ul></li><li><a href=#get-the-chapter-files>Get the chapter files</a></li></ul></nav></div></nav><p>Now that we have our project set up and are aware of the different approaches available, we can create our first UI component.</p><p>This will be a simple component that will demonstrate one of the most important features of Gameface - its dynamic data-binding. The component will be a Clock, placed in the bottom right corner of our HUD.</p><h2 id=mocking-our-data>Mocking our data<a href=#mocking-our-data class=anchor aria-hidden=true>#</a></h2><p>Before we begin writing our HTML and JavaScript, we need to figure out how we are going to provide the data for our components. In a real-world scenario we will have a game which will provide this data to our UI. Since this tutorial focuses more on the Frontend features of Gameface, we will need a way to mock this data. Luckily, Gameface allows us to use JavaScript models to mock data that will be passed to the UI. This is useful in instances where there is no backend implemented just yet, and allows the UI developers to continue with their work.</p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">üëâ</div><div class=w-100>Mocking data from JS is a very common practice that allows UI developers to remain relatively independent and to work on the UI regardless of the progress of the backend.</div></div><p>To start, we are going to create a new file called model.js along with the other project files. Inside, we will make a new constant that will be our model object:</p><pre><code>const model = {
    
}
</code></pre><p>Since we will be making a clock, we can add the following key to this object:</p><pre><code>const model = {
    time: &quot;10:20&quot;
}
</code></pre><p>With a random value.</p><p>Now that we have our object, we can register it as a model. To do that, first we will need to write the following code:</p><pre><code>engine.whenReady.then(() =&gt; {
 
})
</code></pre><p>This is because we need to wait for Gameface to load before registering our model. To do that we need to use <code>engine.whenReady</code> which will return a Promise. After that promise is resolved in our <code>then()</code> function, we can register and start using our models.</p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">‚ùó</div><div class=w-100>A quick note before continuing - as you might have already noticed, every function that we use to leverage Gameface‚Äôs features starts with engine. The reason is that the cohtml.js file exports the engine module that contains all of the functions we need to communicate with the backend. You can read more about what the engine module does in our <a href=https://coherent-labs.com/Documentation/cpp-gameface/df/d01/javascript_virtual_machine.html>documentation</a>.</div></div><p>Now that we know Gameface is ready, we can register our model. This happens by using the engine.createJSModel function:</p><pre><code>engine.whenReady.then(() =&gt; {
    engine.createJSModel('PlayerModel', model);
    engine.synchronizeModels();
})
</code></pre><p>The first argument is a String and it will be the name of our model. For this example we will use <code>‚ÄòPlayerModel‚Äô</code>. And the second argument is the object that will be registered as a model. Here we will use the one that we created earlier. This now registers our model as a global variable that we can access.</p><p>After registering our model we need to call <code>engine.synchronizeModels()</code>. That will sync our model with the bindings (if there are any) and update them.</p><p>Once we have our model registered, we need to include it in our project. To achieve that, we can add a script tag to our <code>index.html</code> with our model.js file. Note, that in order for the engine module to be available, we need to include our script tag bellow the one for <code>cohtml.js</code>:</p><pre><code>&lt;script src=&quot;./cohtml.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;./model.js&quot;&gt;&lt;/script&gt;
</code></pre><h2 id=creating-our-component>Creating our component<a href=#creating-our-component class=anchor aria-hidden=true>#</a></h2><p>Once the file has been included, we can proceed with creating the clock component. This is a simple component that will display the hours and minutes of the game, based on the model that is provided.</p><p>To create the clock component we will create a wrapped div with the class: <strong>hud</strong> (inside the body tag in the index.html) that will contain all of our HUD elements. Inside that wrapper we will create another div with the class clock and write the time inside to be 22:35 for example.</p><pre><code>&lt;div class=&quot;hud&quot;&gt;
        &lt;div class=&quot;clock&quot;&gt;22:35&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>Before we bind the time of our new clock with the model, we first need to preview if everything looks as expected - we can use the Player for this purpose.<div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">üëâ</div><div class=w-100>The Player is a standalone desktop application that serves as your playground. It's the easiest way to preview your UI and also provides you with all the necessary tools. You can run it by double-clicking on the Player.bat (if on Windows) or the Player.sh (on Mac).</div></div></p><p>Once the Player application has been opened, you can drag and drop the <code>index.html</code> file that you modified inside it.</p><p>If everything is done correctly you should see the following:</p><figure class=border-0><img class="img-fluid lazyload blur-up" data-sizes=auto src=/StarterGuide/chapters/chapter-2/chapter-2_1.png width=1306 height=750 alt=chapter-2_1><noscript><img class=img-fluid sizes=100vw src=/StarterGuide/chapters/chapter-2/chapter-2_1.png width=1306 height=750 alt=chapter-2_1></noscript><figcaption class=figure-caption><em>Player with the clock showing in the bottom</em></figcaption></figure><p>Great, now our clock is visible in the bottom right corner and it shows the time we‚Äôve set. We can now continue with binding its value to the model we registered earlier.</p><h3 id=binding-our-mocked-data>Binding our mocked data<a href=#binding-our-mocked-data class=anchor aria-hidden=true>#</a></h3><p>To achieve this we will use the following attribute <em>(only available in Gameface)</em> - <code>data-bind-value</code>. <code>data-bind-value</code> changes the internal text of the element to the value of the model passed. The value we will pass is <code>{{PlayerModel.time}}</code>:</p><pre><code>    &lt;div class=&quot;clock&quot; data-bind-value=&quot;{{PlayerModel.time}}&quot;&gt;22:35&lt;/div&gt;
</code></pre><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">‚ùó</div><div class=w-100>Note that the model is a string and it‚Äôs wrapped in double curly braces. This will be the case for all available data-bindings.</div></div><p>Once completed, we can check the Player and see if the time has been updated to 10:20 as it is in the model. To refresh the Player with the new changes simply press <strong>F5</strong> (as you normally would in the browser).</p><p>Now we can see that the time is set to the one from the model:<figure class=border-0><img class="img-fluid lazyload blur-up" data-sizes=auto src=/StarterGuide/chapters/chapter-2/chapter-2_2.png width=1306 height=751 alt=chapter-2_2><noscript><img class=img-fluid sizes=100vw src=/StarterGuide/chapters/chapter-2/chapter-2_2.png width=1306 height=751 alt=chapter-2_2></noscript><figcaption class=figure-caption><em>Clock showing the data from the model</em></figcaption></figure></p><p>If we go and change the model to a different time (for example, 12:20), then refresh, we will see the change reflected in the Player.</p><p>Data binding is one of the ways we can connect the game with the UI. There are more bindings available apart from value - these will be covered in the next chapters.</p><h3 id=updating-our-clock-to-the-system-time>Updating our clock to the system time<a href=#updating-our-clock-to-the-system-time class=anchor aria-hidden=true>#</a></h3><p>Now that the mock data is bound to our UI, we can create a function to automatically change the time each minute.</p><p>To do that, first we will create a function that will get us the current time in a HH:MM format. we will call this function <code>getCurrentTime</code> and add the following code:</p><pre><code>function getCurrentTime() {
    const date = new Date();
 
    return `${date.getHours()}:${date.getMinutes()}`;
}
</code></pre><p>This will return us the current hour and minutes.</p><p>We can now change the value of our initial time with that of our function:</p><pre><code>const model = {
    time: getCurrentTime(),
};
</code></pre><p>To have our time update, we can create another function called <code>updateCurrentTime()</code> and place the following code inside:</p><pre><code>function updateCurrentTime() {
    setInterval(() =&gt; {
        PlayerModel.time = getCurrentTime();
        engine.updateWholeModel(PlayerModel);
        engine.synchronizeModels();
    }, 60000)
}
</code></pre><p>Now every minute the clock will be updated with the current time. (In general, this is not a very accurate way to update time, but it is suitable for the purpose of this tutorial.)</p><p>From this code, the most important thing to note is the <code>engine.updateWholeModel</code> and <code>engine.synchronizeModels</code> functions - those functions need to be called each time an update of the model from the JS side is required. <code>updateWholeModel</code> updates the registered model, whereas <code>synchronizeModel</code> synchronizes the changes with the bound elements.</p><p>We can then call our function in the <code>engine.whenReady</code> promise.</p><pre><code>engine.whenReady.then(() =&gt; {
    engine.createJSModel(&quot;PlayerModel&quot;, model);
    engine.synchronizeModels();
    updateCurrentTime();
});
</code></pre><p>Once we run the page in the Player again, we should see the accurate update of the current time (reflecting the time change every minute).</p><p>We have now created our first UI component and successfully connected it to the game (although it was mocked). This concludes Chapter 2. In the sample for this tutorial you can see the complete code in the chapter_2 folder.</p><p>Next in <strong>Chapter 3</strong> we will create more mocked data and introduce new types of data-binding</p><h2 id=get-the-chapter-files>Get the chapter files<a href=#get-the-chapter-files class=anchor aria-hidden=true>#</a></h2><p>You can download the completed chapter from <a href=https://github.com/CoherentLabs/StarterGuide/raw/master/files/chapter_2/chapter_2.zip>here</a></p><div class=my-n3></div><div class="row mt-5"><div class=col-8><a class="btn btn-dark px-4 mb-4 mt-4" href=https://coherentlabs.github.io/StarterGuide/chapters/chapter-1/ role=button>Previous Chapter</a></div><div class="col-8 d-flex justify-content-end"><a class="btn btn-dark px-4 mb-4 mt-4" href=https://coherentlabs.github.io/StarterGuide/chapters/chapter-3/ role=button>Next Chapter</a></div></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/StarterGuide/js/bootstrap.min.73ca27033146a505b6a0f66b79d99f613a18e778bc9606fd223476d0ebf0fc10508b0d4f5c448b0a946fa1d71fbeffaae9732adc0c2890e61c449217fd6ee1c0.js integrity="sha512-c8onAzFGpQW2oPZredmfYToY53i8lgb9IjR20Ovw/BBQiw1PXESLCpRvodcfvv+q6XMq3AwokOYcRJIX/W7hwA==" crossorigin=anonymous defer></script>
<script src=/StarterGuide/js/highlight.min.e13cfba4c5524e30386cb9ea71f0f191f39d15b25b222f4b67549689f7c076158f42a2282446044f5cdacc76a6d003efbfa252a84aea0116703803b6339ae35f.js integrity="sha512-4Tz7pMVSTjA4bLnqcfDxkfOdFbJbIi9LZ1SWiffAdhWPQqIoJEYET1zazHam0APvv6JSqErqARZwOAO2M5rjXw==" crossorigin=anonymous defer></script>
<script src=/StarterGuide/main.min.dabf7f45921a731f1f8e566e38aed10bb67fb15f4056a8d7e7b56548bb63e1242016c0d83ab86eefab01a24933f8aa4f6e183ba127726dcb59f051ed0ec9f345.js integrity="sha512-2r9/RZIacx8fjlZuOK7RC7Z/sV9AVqjX57VlSLtj4SQgFsDYOrhu76sBokkz+KpPbhg7oSdybctZ8FHtDsnzRQ==" crossorigin=anonymous defer></script></body></html>