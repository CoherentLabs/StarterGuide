<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://starter.coherent-labs.com/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://starter.coherent-labs.com/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.a662bc8e4f8970ca3ed4c0b575059530e22afc4a615e0c418f4f4a8d03ad42b693e5a73b57997b2af4cbdd5185b3b5bb7e95a15b3f11d857533644f2c2436bba.css integrity="sha512-pmK8jk+JcMo+1MC1dQWVMOIq/EphXgxBj09KjQOtQraT5ac7V5l7KvTL3VGFs7W7fpWhWz8R2FdTNkTywkNrug==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory - Gameface Starter Guide</title><meta name=description content><link rel=canonical href=https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory"><meta property="og:description" content="In this chapter we will start translating the JavaScript data in the model.js file (in the state that it is at the end of Chapter 9) to Unreal C++ and introduce our automatic data-binding feature, exclusive to our Unreal Engine plugin.
Introducing the UType Binder By far the most convenient feature we have (and will start demonstrating starting from this chapter onwards) available is the automatic data-binding. We have a whole section in our documentation that covers the feature in great detail, but for this guide all you need to know is that we&rsquo;re going to basically expose class member data through Unreal&rsquo;s reflection system and this is done by simply including the relevant header file that we have available."><meta property="og:url" content="https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/"><meta property="og:site_name" content="Gameface Starter Guide"><meta property="article:published_time" content="2021-12-03T23:02:33+02:00"><meta property="article:modified_time" content="2021-12-03T23:02:33+02:00"><meta property="og:image" content="https://starter.coherent-labs.com/doks.png"><meta property="og:image:alt" content="Gameface Starter Guide"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@getdoks"><meta name=twitter:creator content="@henkverlinde"><meta name=twitter:title content="Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory"><meta name=twitter:description content><meta name=twitter:image content="https://starter.coherent-labs.com/doks.png"><meta name=twitter:image:alt content="Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://starter.coherent-labs.com/#/schema/organization/1","name":"Doks","url":"https://starter.coherent-labs.com/","sameAs":["https://twitter.com/getdoks","https://github.com/h-enk/doks"],"logo":{"@type":"ImageObject","@id":"https://starter.coherent-labs.com/#/schema/image/1","url":"https://starter.coherent-labs.com/logo-doks.png","width":512,"height":512,"caption":"Doks"},"image":{"@id":"https://starter.coherent-labs.com/#/schema/image/1"}},{"@type":"WebSite","@id":"https://starter.coherent-labs.com/#/schema/website/1","url":"https://starter.coherent-labs.com/","name":"Gameface Starter Guide","description":"","publisher":{"@id":"https://starter.coherent-labs.com/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/","url":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/","name":"Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory","description":"","isPartOf":{"@id":"https://starter.coherent-labs.com/#/schema/website/1"},"about":{"@id":"https://starter.coherent-labs.com/#/schema/organization/1"},"datePublished":"2021-12-03T23:02:33CET","dateModified":"2021-12-03T23:02:33CET","breadcrumb":{"@id":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/"]}]},{"@type":"BreadcrumbList","@id":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://starter.coherent-labs.com","url":"https://starter.coherent-labs.com","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://starter.coherent-labs.com/unreal-chapters/","url":"https://starter.coherent-labs.com/unreal-chapters/","name":"Unreal Chapters"}},{"@type":"ListItem","position":4,"item":{"@id":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://starter.coherent-labs.com/unreal-chapters/ue-chapter-3/#/schema/image/2","url":"https://starter.coherent-labs.com/doks.png","contentUrl":"https://starter.coherent-labs.com/doks.png","caption":"Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://starter.coherent-labs.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://starter.coherent-labs.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://starter.coherent-labs.com/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://starter.coherent-labs.com/site.webmanifest></head><body class="unreal-chapters single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Bootstrap>Gameface Starter Guide</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Gameface Starter Guide</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=/chapters/>FrontEnd</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/unreal-chapters/>Unreal Engine</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"></ul></div></div></nav></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-unreal-chapters aria-expanded=true>
Unreal Chapters</button><div class="collapse show" id=section-unreal-chapters><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=/unreal-chapters/ue-chapter-1/>Unreal Engine Chapter 1: Getting Started</a></li><li><a class="docs-link rounded" href=/unreal-chapters/ue-chapter-2/>Unreal Engine Chapter 2: Map setup</a></li><li><a class="docs-link rounded active" href=/unreal-chapters/ue-chapter-3/>Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory</a></li><li><a class="docs-link rounded" href=/unreal-chapters/ue-chapter-4/>Unreal Engine Chapter 4: Creating the Map and Point of Interest</a></li><li><a class="docs-link rounded" href=/unreal-chapters/ue-chapter-5/>Unreal Engine Chapter 5: Handling events received from JavaScript</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#introducing-the-utype-binder>Introducing the UType Binder</a><ul><li><a href=#overview-of-the-required-player-model-data>Overview of the required Player model data</a></li><li><a href=#preparing-for-the-model-creation>Preparing for the model creation</a></li><li><a href=#implementing-the-player-model>Implementing the Player model</a></li><li><a href=#registering-the-player-model>Registering the Player model</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><nav aria-label=breadcrumb><ol class=breadcrumb><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/unreal-chapters/>Unreal Chapters</a></li><li class="breadcrumb-item active" aria-current=page>Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory</li></ol></nav><h1>Unreal Engine Chapter 3: Creating the Player Model, Minimap and Inventory</h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#introducing-the-utype-binder>Introducing the UType Binder</a><ul><li><a href=#overview-of-the-required-player-model-data>Overview of the required Player model data</a></li><li><a href=#preparing-for-the-model-creation>Preparing for the model creation</a></li><li><a href=#implementing-the-player-model>Implementing the Player model</a></li><li><a href=#registering-the-player-model>Registering the Player model</a></li></ul></li></ul></nav></div></nav><p>In this chapter we will start translating the JavaScript data in the <code>model.js</code> file (in the state that it is at the end of <a href=https://starter.coherent-labs.com/chapters/chapter-9/>Chapter 9</a>) to Unreal C++ and introduce our <strong>automatic data-binding feature</strong>, exclusive to our Unreal Engine plugin.</p><h2 id=introducing-the-utype-binder>Introducing the UType Binder<a href=#introducing-the-utype-binder class=anchor aria-hidden=true>#</a></h2><p>By far the most convenient feature we have (and will start demonstrating starting from this chapter onwards) available is the automatic data-binding. We have <a href=https://coherent-labs.com/Documentation/UnrealEngine4-gameface/db/d1c/_java_script_interactions.html>a whole section</a> in our documentation that covers the feature in great detail, but for this guide all you need to know is that we&rsquo;re going to basically expose class member data through Unreal&rsquo;s reflection system and this is done by simply including the relevant header file that we have available.</p><h3 id=overview-of-the-required-player-model-data>Overview of the required Player model data<a href=#overview-of-the-required-player-model-data class=anchor aria-hidden=true>#</a></h3><p>If you&rsquo;ve followed the original guide, the JavaScript <code>model</code> object should be quite familiar. We&rsquo;re now going to translate all of its data from the <a href=https://starter.coherent-labs.com/chapters/chapter-9/>Chapter 9</a> <code>model.js</code> over to Unreal C++. For this purpose we obviously need to create another class through the Unreal Editor, let&rsquo;s call it <code>PlayerModel</code> and for simplicity&rsquo;s sake (to spare us unnecessary noise), let&rsquo;s have it&rsquo;s parent class be <code>UObject</code>. Since this should by now be a familiar process, we won&rsquo;t add a screenshot this time.</p><p>Looking at the <code>model.js</code> file, let&rsquo;s quickly go over what kind of data we require:</p><ul><li>We want to include <code>CohtmlUTypeBinder.h</code>, <code>CohtmlFStringBinder.h</code> and <code>CohtmlTArrayBinder.h</code></li><li>We want to specify our class constructor</li><li>We want a <code>time</code> variable, which is a string that holds the current time, so we will declare it as an <code>FString</code></li><li>We want <code>currentHealth</code> and <code>maxHealth</code> variables, which will be <code>int32</code>s</li><li>We want two methods returning <code>bool</code> - <code>shouldShowHealthWarning</code> and <code>shouldShowHealthDanger</code></li><li>We want a <code>minimap</code> object, which will be a <code>USTRUCT</code><ul><li>It requires:<ul><li>An <code>id</code> variable, which will be of type <code>int32</code></li><li>An <code>x</code>, <code>y</code> and <code>angle</code> variable, which can will of type <code>float</code></li><li>A <code>label</code>, which will be an <code>FString</code></li></ul></li></ul></li><li>We want a <code>isPaused</code> <code>bool</code> variable</li><li>We want a <code>activePauseMenu</code> <code>FString</code> variable</li><li>We want <code>inventoryItems</code>, which is going to be a <code>TArray</code> containing <code>InventoryItem</code> objects (another <code>USTRUCT</code>)<ul><li>The <code>InventoryItem</code> requires:<ul><li>A <code>title</code>, <code>image</code> and <code>description</code> variable, all of which will be <code>FString</code></li><li>A <code>count</code> variable, which will be <code>int32</code></li></ul></li></ul></li><li>We want <code>selectedItem</code>, which will be an <code>int32</code> variable</li><li>We want an <code>itemSelect</code> <code>void</code> method</li><li>Additionally, we will also declare a <code>const</code> <code>uint32</code> variable for the &ldquo;inventory size&rdquo;, as well as an <code>FItemSelectDelegate</code> (this one will be explained <a href=#registering-the-player-model>later</a>)</li><li>Lastly, for the C++ implementation, we also want an <code>itemToDisplay</code> variable of type <code>FInventoryItem</code>, which we will use to create a synchronization dependency so that we won&rsquo;t have to update the currently selected inventory item every time a different one is selected.</li></ul><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">‚ùó</div><div class=w-100>Keep in mind, that we need to preserve the same variable name casing, so that the interaction with the frontend code will happen correctly. You can alternatively visit your Gameface settings and toggle the <a href=https://coherent-labs.com/Documentation/UnrealEngine4-gameface/db/d1c/_java_script_interactions.html#lowercase_in_automatic_binding>lowercase name exposure option</a>.</div></div><p>Before we dive into the code, let&rsquo;s get a few things explained - to successfully utilize the automatic binding of our data, we require the binder header files for certain types like <code>FString</code> and <code>TArray</code>, hence the additional include directives.</p><p>As mentioned previously in order for all of this to work, we utilize Unreal&rsquo;s reflection system, which means that our class/struct needs to be have the Unreal respective <code>UCLASS</code>/<code>USTRUCT</code> macro used. But what&rsquo;s more - every data we want exposed to JavaScript needs to be a <code>UPROPERTY</code>. We can also expose methods using <code>UFUNCTION</code>. Additional details can be once again be found in our <a href=https://coherent-labs.com/Documentation/UnrealEngine4-gameface/db/d1c/_java_script_interactions.html>JavaScript interactions</a> section of our <a href=https://coherent-labs.com/Documentation/UnrealEngine4-gameface/>documentation</a>.</p><h3 id=preparing-for-the-model-creation>Preparing for the model creation<a href=#preparing-for-the-model-creation class=anchor aria-hidden=true>#</a></h3><p>Before we start implementing the Player model, let&rsquo;s first do a quick setup in our <code>StarterGuideHUD</code> class. We need to add a couple of things:</p><ul><li>We want to include the <code>CohtmlUTypeBinder.h</code></li><li>We want to specify our class constructor</li><li>We want to override our <code>BeginPlay</code> method</li><li>We want to add a <code>BindUI</code> method</li><li>We want to have a pointer to the <code>View</code> that we are going to use</li></ul><p>Considering all of these, our <code>StarterGuideHUD.h</code> needs to look like this in the end:</p><pre><code>#pragma once

#include &lt;CohtmlUTypeBinder.h&gt;

#include &quot;GameFramework/HUD.h&quot;
#include &quot;CohtmlGameHUD.h&quot;

#include &quot;StarterGuideHUD.generated.h&quot;

UCLASS()
class COHERENTSAMPLE_API AStarterGuideHUD : public ACohtmlGameHUD
{
    GENERATED_BODY()

public:
    AStarterGuideHUD(const FObjectInitializer&amp; PCIP);

    virtual void BeginPlay() override;

    void BindUI();

private:
    cohtml::View* View;
};
</code></pre><p>Ok, now let&rsquo;s go over to the <code>StarterGuideHUD.cpp</code> side:</p><ul><li>Because it takes around 2-3 frames for the View to be ready to do data-binding and we don&rsquo;t want people to implement waiting logic for this themselves, we have a convenient event available (an <code>Unreal Signature</code>), to which we can subscribe our <code>BindUI</code> method.</li><li>In the <code>BindUI</code> body, we want to retrieve the View and assign it to our pointer. By including <code>CohtmlGameHUD.h</code>, we will have access to a very convenient method called <code>GetCohtmlHUD</code>, which does exactly what its name implies. Not only that, but it also holds the aforementioned signature, to which we can subscribe our <code>BindUI</code> method.</li></ul><p>With all of this explained, this is how all of this looks actually in code:</p><pre><code>#include &quot;StarterGuide/StarterGuideHUD.h&quot;

#include &quot;CohtmlGameHUD.h&quot;

AStarterGuideHUD::AStarterGuideHUD(const FObjectInitializer&amp; PCIP)
    : Super(PCIP)
{
    GetCohtmlHUD()-&gt;ReadyForBindings.AddDynamic(this, &amp;AStarterGuideHUD::BindUI);
}

void AStarterGuideHUD::BeginPlay()
{
    Super::BeginPlay();
}

void AStarterGuideHUD::BindUI()
{
    View = GetCohtmlHUD()-&gt;GetView();
    if (!View)
    {
        UE_LOG(LogTemp, Error, TEXT(&quot;Failed to retrieve View!&quot;));
        return;
    }
}
</code></pre><p>And that&rsquo;s it! We can now continue further.</p><h3 id=implementing-the-player-model>Implementing the Player model<a href=#implementing-the-player-model class=anchor aria-hidden=true>#</a></h3><p>On to the actual code of the <code>PlayerModel.h</code> now:</p><ul><li>This is the code for the includes and a delegate declaration (once again, will be explained <a href=#registering-the-player-model>later</a>):</li></ul><pre><code>#pragma once

#include &quot;CohtmlUTypeBinder.h&quot;
#include &lt;CohtmlFStringBinder.h&gt;
#include &lt;CohtmlTArrayBinder.h&gt;

#include &quot;PlayerModel.generated.h&quot;


DECLARE_DYNAMIC_MULTICAST_DELEGATE(FItemSelectDelegate);
</code></pre><ul><li>Next comes the minimap <code>USTRUCT</code>:</li></ul><pre><code>USTRUCT()
struct FSGMinimap
{
    GENERATED_USTRUCT_BODY()

    FSGMinimap()
        : id(8)
        , x(100.0f)
        , y(100.0f)
        , angle(90.0f)
        , label(&quot;River Bank&quot;)
    {
    }

    UPROPERTY()
    int32 id;

    UPROPERTY()
    float x;

    UPROPERTY()
    float y;

    UPROPERTY()
    float angle;

    UPROPERTY()
    FString label;
};
</code></pre><ul><li>Next is the inventory item <code>USTRUCT</code>:</li></ul><pre><code>USTRUCT()
struct FInventoryItem
{
    GENERATED_USTRUCT_BODY()

    FInventoryItem()
        : count(0)
    {
    }

    FInventoryItem(FString Title, int32 Count, FString Image, FString Description)
        : title(Title)
        , count(Count)
        , image(Image)
        , description(Description)
    {
    }

    UPROPERTY()
    FString title;

    UPROPERTY()
    int32 count;

    UPROPERTY()
    FString image;

    UPROPERTY()
    FString description;
};
</code></pre><ul><li>And lastly the Player model <code>UCLASS</code>:</li></ul><pre><code>UCLASS()
class UPlayerModel : public UObject
{
    GENERATED_BODY()

public:
    UPlayerModel();

    UPROPERTY()
    FString time;

    UPROPERTY()
    int32 currentHealth;

    UPROPERTY()
    int32 maxHealth;

    UFUNCTION()
    bool shouldShowHealthWarning()
    {
        int currentHealthPercent = (currentHealth * 100) / maxHealth;
        return currentHealthPercent &gt; 25 &amp;&amp; currentHealthPercent &lt; 50;
    }

    UFUNCTION()
    bool shouldShowHealthDanger()
    {
        int currentHealthPercent = (currentHealth * 100) / maxHealth;
        return currentHealthPercent &lt;= 25;
    }

    UPROPERTY()
    FSGMinimap minimap;

    UPROPERTY()
    bool isPaused;

    UPROPERTY()
    FString activePauseMenu;

    UPROPERTY()
    TArray&lt;FInventoryItem&gt; inventoryItems;

    UPROPERTY()
    FInventoryItem itemToDisplay;

    UPROPERTY()
    int32 selectedItem;

    UPROPERTY()
    FItemSelectDelegate ItemSelectDelegate;

    UFUNCTION()
    void itemSelect(int index)
    {
        selectedItem = index;
        itemToDisplay = inventoryItems[selectedItem];
        ItemSelectDelegate.Broadcast();
    }

private:
    const uint32 INVENTORY_SIZE = 30;
};
</code></pre><p>On the <code>PlayerModel.cpp</code> side, we just need to do our initializations as well as place the iventory items at the same indices, where they are located in the original <code>model.js</code>:</p><pre><code>#include &quot;StarterGuide/PlayerModel.h&quot;

UPlayerModel::UPlayerModel()
    : currentHealth(100)
    , maxHealth(100)
    , isPaused(false)
    , activePauseMenu(&quot;settings&quot;)
    , selectedItem(0)
{
    inventoryItems.SetNum(INVENTORY_SIZE);

    // Adding items in the same slot as originally added in the JS version
    inventoryItems[0] = FInventoryItem(&quot;Sharp Spear&quot;, 1, &quot;spear&quot;, TEXT(
            &quot;A thrusting or throwing weapon with long shaft and sharp head or blade. Great for medium to long range combat&quot;));

    inventoryItems[6] = FInventoryItem(&quot;Horned Helmet&quot;, 1, &quot;helmet&quot;, TEXT(
            &quot;Head covering made of a hard material to resist impact with two sharp horns on the side&quot;));

    inventoryItems[7] = FInventoryItem(&quot;Axe&quot;, 1, &quot;axe&quot;, TEXT(
            &quot;Cutting tool that consists of a heavy edged head fixed to a handle with the edge parallel to the &quot;
            &quot;handle and that is used especially for felling trees and chopping and splitting wood or your enemies.&quot;));
    
    inventoryItems[8] = FInventoryItem(&quot;Longbow&quot;, 1, &quot;bow&quot;, TEXT(
            &quot;Hand-drawn wooden bow held vertically and used especially by medieval English archers&quot;));

    inventoryItems[9] = FInventoryItem(&quot;Arrow&quot;, 5, &quot;arrow&quot;, TEXT(
            &quot;Shot from a bow and usually having a slender shaft, a pointed head, and feathers at the butt&quot;));

    inventoryItems[23] = FInventoryItem(&quot;Beer&quot;, 2, &quot;beer&quot;, TEXT(
            &quot;Carbonated, fermented alcoholic beverage that is usually made from &quot;
            &quot;malted cereal grain (especially barley) and is flavored with hops&quot;));

    itemToDisplay = inventoryItems[selectedItem];
}
</code></pre><h3 id=registering-the-player-model>Registering the Player model<a href=#registering-the-player-model class=anchor aria-hidden=true>#</a></h3><p>Now we need to add the <code>PlayerModel</code> object to the <code>StarterGuideHUD</code> and use the <code>View</code> to invoke the creation of the model. We also need to add an <code>UpdateItemSelect</code> method this time around, which will be hooked to the <code>ItemSelectDelegate</code> that we added to the <code>PlayerModel</code> class.</p><p>This is needed for when the inventory items get clicked and the currently-selected item has to be changed:</p><ul><li>First the <code>PlayerModel</code>&rsquo;s <code>itemSelect</code> method gets invoked from the frontend</li><li>We successfully update the <code>PlayerModel</code>&rsquo;s <code>selectedItem</code> variable with the new <code>index</code> that is provided</li><li>Lastly, we update the <code>itemToDisplay</code></li></ul><p>One problem remains, however - for this change to be reflected in the frontend, we need to <strong>update</strong> the JavaScript model and <strong>synchronize</strong>. This is done by the <code>View</code>, and only the HUD has access to the it.</p><p>And this is basically why we needed <a href=#implementing-the-player-model>the delegate</a> - because now the <code>StarterGuideHUD</code> will be notified that a new inventory item was selected and then it can update the model accordingly, which will cause the synchronization dependency between the C++ model and the JavaScript observable model to happen and in turn - their properties to be synchronized.</p><p>This is one very powerful approach that can be applied in many different situations and allows for endless possibilities!</p><p>And now to wrap up with the actual code! In the <code>StarterGuideHUD.h</code>:</p><pre><code>class UPlayerModel;

UCLASS()
class COHERENTSAMPLE_API AStarterGuideHUD : public ACohtmlGameHUD
{
    GENERATED_BODY()

public:
    AStarterGuideHUD(const FObjectInitializer&amp; PCIP);

    virtual void BeginPlay() override;

    void BindUI();

    UFUNCTION()
    void UpdateItemSelect();

    UPROPERTY()
    UPlayerModel* model;

private:
    cohtml::View* View;
};
</code></pre><p>In the <code>StarterGuideHUD.cpp</code>:</p><pre><code>#include &quot;StarterGuide/StarterGuideHUD.h&quot;
#include &quot;StarterGuide/PlayerModel.h&quot;

#include &quot;CohtmlGameHUD.h&quot;

void AStarterGuideHUD::BeginPlay()
{
    Super::BeginPlay();
    model = NewObject&lt;UPlayerModel&gt;();
}

void AStarterGuideHUD::BindUI()
{
    View = GetCohtmlHUD()-&gt;GetView();
    if (!View)
    {
        UE_LOG(LogTemp, Error, TEXT(&quot;Failed to retrieve View!&quot;));
        return;
    }

    View-&gt;CreateModel(&quot;PlayerModel&quot;, model);
    View-&gt;SynchronizeModels();

    model-&gt;ItemSelectDelegate.AddDynamic(this, &amp;AStarterGuideHUD::UpdateItemSelect);

    UE_LOG(LogTemp, Log, TEXT(&quot;UI is bound!&quot;));
}

void AStarterGuideHUD::UpdateItemSelect()
{
    View-&gt;UpdateWholeModel(model);
    View-&gt;SynchronizeModels();
}
</code></pre><p>In the next chapter we will go over how we will bind the Map model.</p><div class=my-n3></div></main></div></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.592b9faf6c83a2bda564a377cf82f9a67546b198510a93fdb0728f9622ec22729d44be02fb2ea16c3fe5365ae1806259cd111932ca28e68b66462d6937635bab.js integrity="sha512-WSufr2yDor2lZKN3z4L5pnVGsZhRCpP9sHKPliLsInKdRL4C+y6hbD/lNlrhgGJZzREZMsoo5otmRi1pN2Nbqw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.88df7ec5d9693ad9d3c4f131a6974c6b0d00561526e939ea196b4f198ecdcfbac25d69d58367fde8df923823110dba6d1a7eabe44b7ea52559e92d0751b17869.js integrity="sha512-iN9+xdlpOtnTxPExppdMaw0AVhUm6TnqGWtPGY7Nz7rCXWnVg2f96N+SOCMRDbptGn6r5Et+pSVZ6S0HUbF4aQ==" crossorigin=anonymous defer></script>
<script src=/main.min.dabf7f45921a731f1f8e566e38aed10bb67fb15f4056a8d7e7b56548bb63e1242016c0d83ab86eefab01a24933f8aa4f6e183ba127726dcb59f051ed0ec9f345.js integrity="sha512-2r9/RZIacx8fjlZuOK7RC7Z/sV9AVqjX57VlSLtj4SQgFsDYOrhu76sBokkz+KpPbhg7oSdybctZ8FHtDsnzRQ==" crossorigin=anonymous defer></script></body></html>